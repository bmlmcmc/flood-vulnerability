setwd('E:/DOC/others/project/bigdata/raw data susenas/2018 MARET')
library(foreign)
dt0 <- read.spss('kor18ind_diseminasi.sav',to.data.frame = T)
dt1 <- read.spss('kor18rt_diseminasi.sav',to.data.frame = T)
dt2 <- read.spss('Flag Kemiskinan Kab Kota 2018.sav',to.data.frame=T)
dt3 <- read.spss('Flag Kemiskinan Kab Kota 2018_URUT.sav',to.data.frame=T)
dt2$WEIND
head(dt1$WI3)

head(dt2$r107[trimws(dt2$r107)=="10682"])
length(unique(dt2$r107))
length(unique(dt1$WI3))

setwd('D:/jurnal/Final - Dissertation/journal/new/podes2018')
dt1 = read.dbf('podes2018_desa_part1.dbf')


unique(dt1$R101)


setwd('D:/jurnal/pandi/sovi jakarta/data/data banjir')
dt <- data.frame()
for(i in list.files()){
  dt <- rbind.data.frame(dt,read.csv(i))
}
head(dt)

dt$kecamatan[dt$kecamatan=='PULOGADUNG'] <- 'PULO GADUNG'
dt$kecamatan[dt$kecamatan=="CILIINCING"] <- "CILINCING"
dt$kecamatan[dt$kecamatan=="MAMPANG"] <- "MAMPANG PRAPATAN"

dt$ketinggian_air <- gsub('cm|sm','',dt$ketinggian_air)
maxh <- c()
for(i in 1:nrow(dt)){
  a <- strsplit(dt$ketinggian_air[i],'s.d.')[[1]]
  maxh <- c(maxh,a[length(a)])
} 

dt$max_ketinggian <- as.numeric(trimws(maxh))



sort(unique(dt$kecamatan))

aggregate(.~kecamatan,dt[,c('kecamatan','max_ketinggian','lama_genangan',
                            'jumlah_terdampak_rw')],mean)

write.csv(aggregate(.~kecamatan,dt[,c('kecamatan','max_ketinggian','lama_genangan',
                                      'jumlah_tempat_pengungsian')],max),
          'MAKSIMUM banjir.csv')
